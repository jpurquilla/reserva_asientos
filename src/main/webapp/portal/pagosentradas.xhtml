<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core"
                xmlns:h="jakarta.faces.html"
                template="/WEB-INF/clienteLayout/template.xhtml"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="titulo">
        Pagos
    </ui:define>
    <ui:define name="header">
        <h1>Metodo de Pago</h1>
    </ui:define>
    <ui:define name="content" >
    <section style="display:flex ;flex-direction:column;  align-items: center ;justify-content:center">
    <section style="width:60%">   
    <!-- Contenedor informacion de Entradas*/-->
        <div class="flex justify-content-between  " >
            <!--            seccion 1-->
            <div    class="flex-initial flex align-items-center justify-content-start surface-200 font-bold m-2 px-5 py-3 border-round" style=" width:40%">
                <p:card style="width: 25em">
                    <f:facet name="header">
                        <p:graphicImage value="#{not empty pago.evento.foto ? pago.evento.foto : null}"  styleClass="product-image" stream="false"/>
                    </f:facet>
                    <f:facet name="title">

                        <h:outputText value ="#{pago.evento.nombre}"/>
                    </f:facet>
                    <f:facet name="subtitle">
                        <h:outputText value ="Fecha: #{pago.evento.fecha} "/>
                        <p:divider />
                        <h:outputText value ="Hora: #{pago.evento.horainicio} "/>
                        <p:divider />


                    </f:facet>



                    <f:facet name="footer">




                    </f:facet>
                </p:card>



            </div>
            <!--            seccion 2-->
            <div class="flex-initial flex align-items-center justify-content-center surface-200 font-bold m-2 px-5 py-3 border-round  flex-column" style=" width:  100%">
                <div class="formgrid grid"  >
                    <div class="field col-12 ">
                        <p:outputLabel value ="Información de Compra" styleClass="  h-3rem surface-800 font-bold border-round  flex align-items-center justify-content-center text-white w-full"/>

                    </div>
                    <div class="field col-12">

                        <p:inputText type="text" placeholder="Nombre Completo" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"/>

                    </div>
                    <div class="field col-12">

                        <p:inputText type="text" placeholder="Direccion de Facturacion" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"/>

                    </div>

                    <div class="field col-12">
                        <div class="formgrid grid">
                            <p:outputLabel class="field col-12 md:col-5" value="Cantidad de Tickets" />
                            <span class="ui-float-label field col-12 md:col-2">
                                  <p:outputLabel value="#{pago.localidadesSeleccionadas.size()}" />                              
                            </span>
                            <p:commandButton class="field col-12 md:col-6 max-w-8rem ui-button-warning" value="Ver detalles" icon="pi pi-eye" onclick="PF('asientosDialog').show()"/>
                        </div>

                    </div>                        


                    <p:outputLabel value ="TOTAL A PAGAR: $ #{pago.subtotal}" styleClass="  h-8rem bg-primary-900 text-2xl font-bold border-round m-2 flex align-items-center justify-content-center text-white w-full" /> 

                </div> 

            </div>



        </div>    
    
    <h:form id="pago">

            <p:card style=" width: 100%; margin-bottom: 2em " styleClass="shadow-8" >

                <f:facet name="title">
                    <div class ="bg-primary-900 font-bold border-round m-2 flex align-items-center justify-content-center text-white">
                        Tarjeta de Crédito
                    </div>


                </f:facet >

                <div class=" flex justify-content-center flex-wrap  align-content-center" style="width:100%">

                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
                        <path fill="#1565C0" d="M45,35c0,2.209-1.791,4-4,4H7c-2.209,0-4-1.791-4-4V13c0-2.209,1.791-4,4-4h34c2.209,0,4,1.791,4,4V35z"></path><path fill="#FFF" d="M15.186 19l-2.626 7.832c0 0-.667-3.313-.733-3.729-1.495-3.411-3.701-3.221-3.701-3.221L10.726 30v-.002h3.161L18.258 19H15.186zM17.689 30L20.56 30 22.296 19 19.389 19zM38.008 19h-3.021l-4.71 11h2.852l.588-1.571h3.596L37.619 30h2.613L38.008 19zM34.513 26.328l1.563-4.157.818 4.157H34.513zM26.369 22.206c0-.606.498-1.057 1.926-1.057.928 0 1.991.674 1.991.674l.466-2.309c0 0-1.358-.515-2.691-.515-3.019 0-4.576 1.444-4.576 3.272 0 3.306 3.979 2.853 3.979 4.551 0 .291-.231.964-1.888.964-1.662 0-2.759-.609-2.759-.609l-.495 2.216c0 0 1.063.606 3.117.606 2.059 0 4.915-1.54 4.915-3.752C30.354 23.586 26.369 23.394 26.369 22.206z"></path><path fill="#FFC107" d="M12.212,24.945l-0.966-4.748c0,0-0.437-1.029-1.573-1.029c-1.136,0-4.44,0-4.44,0S10.894,20.84,12.212,24.945z"></path>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
                        <path fill="#3F51B5" d="M45,35c0,2.209-1.791,4-4,4H7c-2.209,0-4-1.791-4-4V13c0-2.209,1.791-4,4-4h34c2.209,0,4,1.791,4,4V35z"></path><path fill="#FFC107" d="M30 14A10 10 0 1 0 30 34A10 10 0 1 0 30 14Z"></path><path fill="#FF3D00" d="M22.014,30c-0.464-0.617-0.863-1.284-1.176-2h5.325c0.278-0.636,0.496-1.304,0.637-2h-6.598C20.07,25.354,20,24.686,20,24h7c0-0.686-0.07-1.354-0.201-2h-6.598c0.142-0.696,0.359-1.364,0.637-2h5.325c-0.313-0.716-0.711-1.383-1.176-2h-2.973c0.437-0.58,0.93-1.122,1.481-1.595C21.747,14.909,19.481,14,17,14c-5.523,0-10,4.477-10,10s4.477,10,10,10c3.269,0,6.162-1.575,7.986-4H22.014z"></path>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 48 48">
                        <path fill="#1976D2" d="M45,35c0,2.209-1.791,4-4,4H7c-2.209,0-4-1.791-4-4V13c0-2.209,1.791-4,4-4h34c2.209,0,4,1.791,4,4V35z"></path><path fill="#FFF" d="M22.255 20l-2.113 4.683L18.039 20h-2.695v6.726L12.341 20h-2.274L7 26.981h1.815l.671-1.558h3.432l.682 1.558h3.465v-5.185l2.299 5.185h1.563l2.351-5.095v5.095H25V20H22.255zM10.135 23.915l1.026-2.44 1.066 2.44H10.135zM37.883 23.413L41 20.018h-2.217l-1.994 2.164L34.86 20H28v6.982h6.635l2.092-2.311L38.767 27h2.21L37.883 23.413zM33.728 25.516h-4.011v-1.381h3.838v-1.323h-3.838v-1.308l4.234.012 1.693 1.897L33.728 25.516z"></path>
                    </svg>

                </div>
                <p:messages id="msgs"/>
                <!-- Contenedor de Input de tarjeta*/-->
                <div class="formgrid grid" style="padding: 0rem 3rem" >
                    
                    
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="nombre" value="Nombre:" styleClass=" font-bold border-round"/>
                        <p:inputText id="nombre" required="true" label="Firstname" placeholder="Nombre del Titular" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                            <f:validateLength minimum="2"/>
                        </p:inputText>
                        <p:message for="nombre" display="icon"/>
                
                    </div>
                    <div class="field col-12 md:col-6">
                        <p:outputLabel for="tarjeta" value="Numero de Tarjeta:" styleClass=" font-bold border-round" />
                        <p:inputMask id="tarjeta" mask="9999-9999-9999-9999"  label="Lasttarjeta" placeholder="#### #### #### ####" required="true" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                            <f:validateLength minimum="10"/>
                       
                        </p:inputMask>
                        <p:message for="tarjeta" id="msgLasttarjeta" display="icon"/>   
                    </div>
                    <div class="field col-12 md:col-3">
                        <p:outputLabel for="cvv" value="Codigo CVV:" styleClass=" font-bold border-round" />
                        <p:inputMask id="cvv" mask="999"  label="Lastcvv" placeholder="###"  required="true" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                            <f:validateLength minimum="2"/>
                        
                        </p:inputMask>
                        <p:message for="cvv" id="msgLastcvv" display="icon"/>   
                    </div>
                    <div class="field col-12 md:col-9">
                    <p:outputLabel for="fecha" value="Fecha de Vencimiento:" styleClass=" font-bold border-round" />
                    <p:inputMask id="fecha" mask="99/9999" label="Lastfecha" placeholder="##/####"  required="true" class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                        <f:validateLength minimum="2"/>
                        <p:ajax update="msgLastfecha" event="keyup"/>
                    </p:inputMask>
                    <p:message for="fecha" id="msgLastfecha" display="icon"/>   
                    </div>
                    



                </div>                        

                <f:facet name="footer" >
                    <div Class="flex justify-content-end ">
                        <p:commandButton  type="submit" value="Cancelar" styleClass="ui-button-success mr-2" style="width: 6rem" onclick="PF('cancelarPagoDialog').show()"  /> 
                        <p:commandButton value="Pagar" update="msgs @form" icon="pi pi-check" oncomplete="if (args &amp;&amp; !args.validationFailed) PF('confirmarPagoDialog').show();"/>
                    </div>
                </f:facet>  


            </p:card>
            <p:dialog closable="false" draggable="false" resizable="false" header="Atención" widgetVar="confirmarPagoDialog" minHeight="40" width="350" showEffect="fade" modal="true">
                <p class="m-0">La reserva se ha realizado correctamente</p>
                <f:facet name="footer">
                    <div class="flex justify-content-center">
                        <p:commandButton  type="submit" value="Aceptar" styleClass="ui-button-success mr-2" style="width: 6rem" action="#{pago.confirmarPago()}" />                              
                    </div>
                </f:facet>
            </p:dialog>

            <p:dialog closable="false" draggable="false" resizable="false" header="¿Desea cancelar la compra?" widgetVar="cancelarPagoDialog" minHeight="40" width="350" showEffect="fade" modal="true">
                <div class="flex justify-content-center">
                    <p:commandButton type="submit" value="SI" styleClass="ui-button-danger mr-2" style="width: 6rem" action="#{pago.cancelarPago()}" />
                    <p:commandButton type="submit" value="NO" styleClass="ui-button-danger ui-button-flat mr-2" style="width: 6rem" onclick="PF('cancelarPagoDialog').hide()" />
                </div>

            </p:dialog>
        </h:form>    
        <p:dialog  draggable="false" resizable="false" header="Asientos seleccionados" widgetVar="asientosDialog" minHeight="40" width="350" showEffect="fade" modal="true">
                <div class="flex justify-content-center">
                    <p:dataTable var="localidadS" value="#{pago.localidadesSeleccionadas}">
                        <p:column headerText="Asiento">
                            <h:outputText value="#{localidadS.localidadPK.codigo}" />
                        </p:column>

                        <p:column headerText="Sección">
                            <h:outputText value="#{pago.getSeccion(localidadS).nombre}" />
                        </p:column>

                        <p:column headerText="Precio">
                            <h:outputText value="#{pago.getSeccion(localidadS).precio}" />
                        </p:column>
                    </p:dataTable>
                </div>
            </p:dialog>   
    </section>
    </section>    







    </ui:define>
</ui:composition>
